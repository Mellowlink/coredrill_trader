#:import utils kivy.utils
<DashboardLayout>

    asset_price:asset_price
    margin_ratio:margin_ratio

    amount_small:amount_small
    amount_medium:amount_medium
    amount_large:amount_large

    long_btn:long_btn
    short_btn:short_btn

    pending_tx_size:pending_tx_size
    pending_tx_margin:pending_tx_margin

    execute_btn:execute_btn

    pos_size:pos_size
    entry_price:entry_price
    liq_price:liq_price
    pos_margin:pos_margin
    pos_pnl:pos_pnl
    close_pos_btn:close_pos_btn

    GridLayout:
        cols: 1
        size: root.width, root.height

        # main background color
        canvas.before:
            Color:
                rgba: (utils.get_color_from_hex('#181A20'))
            Rectangle:
                pos: self.pos
                size: self.size

        GridLayout:
            cols: 2
            #background color
            canvas.before:
                Color:
                    rgba: (utils.get_color_from_hex('#1E2026'))
                Rectangle:
                    pos: self.pos
                    size: self.size
            Label:
                text: "ETH/USDT"
                font_size: 18
                size_hint_x: 0.65
                canvas.before:
                    Color:
                        rgba: utils.get_color_from_hex('#181A20')
                    Rectangle:
                        pos: self.pos
                        size: self.size
            Label:
                text: "Margin Ratio"
                font_size: 16
                size_hint_x: 0.35
            Label:
                id: asset_price
                text: "3,957.66"
                font_size: 36
                size_hint_x: 0.65
                color: utils.get_color_from_hex('#0ecb81')
                canvas.before:
                    Color:
                        rgba: utils.get_color_from_hex('#181A20')
                    Rectangle:
                        pos: self.pos
                        size: self.size
            Label:
                id: margin_ratio
                text: "2.52%"
                font_size: 24
                size_hint_x: 0.35
                color: utils.get_color_from_hex('#0ecb81')

        GridLayout:
            cols: 3
            row_force_default: True
            row_default_height: 50
            #background color
            canvas.before:
                Color:
                    rgba: (utils.get_color_from_hex('#1E2026'))
                Rectangle:
                    pos: self.pos
                    size: self.size

            ToggleButton:
                id: amount_small
                text: "5%"
                group: "tx_amount"
                font_size: 16
                background_normal: ''
                background_color: utils.get_color_from_hex('#f0b600')
                on_press: root.change_tx_amount(self)
            ToggleButton:
                id: amount_medium
                text: "10%"
                group: "tx_amount"
                font_size: 16
                background_normal: ''
                background_color: utils.get_color_from_hex('#f0b600')
                on_press: root.change_tx_amount(self)
            ToggleButton:
                id: amount_large
                text: "15%"
                group: "tx_amount"
                font_size: 16
                background_normal: ''
                background_color: utils.get_color_from_hex('#f0b600')
                on_press: root.change_tx_amount(self)

        GridLayout:
            cols: 2
            row_force_default: True
            row_default_height: 50
            #background color
            canvas.before:
                Color:
                    rgba: (utils.get_color_from_hex('#1E2026'))
                Rectangle:
                    pos: self.pos
                    size: self.size

            ToggleButton:
                id: long_btn
                text: "Buy/Long"
                group: "tx_direction"
                font_size: 16
                size_hint_x: None
                background_normal: ''
                background_color: utils.get_color_from_hex('#0ecb81')
                on_press: root.change_tx_direction(self)
            ToggleButton:
                id: short_btn
                text: "Sell/Short"
                group: "tx_direction"
                font_size: 16
                size_hint_x: None
                background_normal: ''
                background_color: utils.get_color_from_hex('#f6465d')
                on_press: root.change_tx_direction(self)

        GridLayout:
            cols: 4
            row_force_default: True
            row_default_height: 30
            #background color
            canvas.before:
                Color:
                    rgba: (utils.get_color_from_hex('#1E2026'))
                Rectangle:
                    pos: self.pos
                    size: self.size

            #TODO: Get rid of weird empty labels being used to balance the GridLayout
            Label:
                text: ""
            Label:
                text: "Size"
                font_size: 16
                color: utils.get_color_from_hex('#999999')
            Label:
                text: "Margin"
                font_size: 16
                color: utils.get_color_from_hex('#999999')
            Label:
                text: ""
            Label:
                text: ""
            Label:
                id: pending_tx_size
                text: "0.052 TEST"
                font_size: 18
            Label:
                id: pending_tx_margin
                text: "25.43 USDT"
                font_size: 18
            Label:
                text: ""

        GridLayout:
            cols: 1
            #background color
            canvas.before:
                Color:
                    rgba: (utils.get_color_from_hex('#1E2026'))
                Rectangle:
                    pos: self.pos
                    size: self.size

            Button:
                id: execute_btn
                text: "Execute"
                font_size: 16
                #pos_hint: {'center_x': 0.5}
                on_release: root.execute_pressed()

        GridLayout:
            cols: 6
            row_force_default: True
            row_default_height: 30
            #background color
            canvas.before:
                Color:
                    rgba: (utils.get_color_from_hex('#181A20'))
                Rectangle:
                    pos: self.pos
                    size: self.size
            Label:
                text: "Size"
                font_size: 14
                color: utils.get_color_from_hex('#999999')
            Label:
                text: "Entry Price"
                font_size: 14
                color: utils.get_color_from_hex('#999999')
            Label:
                text: "Liq. Price"
                font_size: 14
                color: utils.get_color_from_hex('#999999')
            Label:
                text: "Margin"
                font_size: 14
                color: utils.get_color_from_hex('#999999')
            Label:
                text: "PNL(ROE %)"
                font_size: 14
                color: utils.get_color_from_hex('#999999')
            #TODO: Get rid of this empty label
            Label:
                text: ""
                font_size: 14

            Label:
                id: pos_size
                text: "0.138 TEST"
                color: utils.get_color_from_hex('#0ecb81')
                font_size: 14
            Label:
                id: entry_price
                text: "4,037.54"
                font_size: 14
            Label:
                id: liq_price
                text: "4,897.83"
                color: utils.get_color_from_hex('#f0b600')
                font_size: 14
            Label:
                id: pos_margin
                text: "56.01"
                font_size: 14
            Label:
                id: pos_pnl
                text: "-1.96(-2.98%)"
                color: utils.get_color_from_hex('#ca0c25')
                font_size: 14
            Button:
                id: close_pos_btn
                text: "Close"
                font_size: 14
                background_normal: ''
                background_color: utils.get_color_from_hex('#f0b600')
                on_release: root.close_position()

</DashboardLayout>
